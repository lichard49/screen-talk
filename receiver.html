<html>
  <head>
    <link rel="stylesheet" href="//fonts.googleapis.com/css?family=Roboto:300,300italic,700,700italic">
    <link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/normalize/5.0.0/normalize.css">
    <link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/milligram/1.3.0/milligram.css">
    <link rel="stylesheet" href="https://milligram.github.io/styles/main.css">
  </head>

  <body>
    <main class="wrapper">
      <nav class="navigation">
        <section class="container">
          <h1 class="title">Screen Talk ~ Receiver</h1>
        </section>
      </nav>

      <section class="container">
        <video id="camera" style="display: none;" autoplay playsinline></video>
        <button id="start-camera">Start camera</button>
        <canvas id="blob"/>
      </section>
    </main>

    <script type="text/javascript">
    </script>
  </body>

  <script type="text/javascript">
    const video = document.getElementById('camera');
    const button = document.getElementById('start-camera');

    button.addEventListener('click', event => {
      const videoConstraints = {};
      const constraints = {
        video: videoConstraints,
        audio: false
      };
      navigator.mediaDevices
        .getUserMedia(constraints)
        .then(stream => {
          currentStream = stream;
          video.srcObject = stream;

          setupVideo();

          return navigator.mediaDevices.enumerateDevices();
        })
        .catch(error => {
          console.error(error);
        });
    });

    const canvas = document.getElementById('blob');

    function setupVideo() {
      setInterval(drawFrame, 10);
    }

    function drawFrame() {
      if (canvas.width != video.videoWidth) {
        canvas.width = video.videoWidth;
        canvas.height = video.videoHeight;
      }

      canvas.getContext('2d').drawImage(video, 0, 0);
    }
  </script>
</html>